# ラーニング パス 2 - ラボ 2 - 演習 2 - ロールとロール グループを管理する

この演習では、Adatum の新しい Microsoft 365 管理者である Holly Dickson として引き続き役割を果たします。 Adatum の Microsoft 365 パイロット プロジェクトの一環として、ラボ ホスティング プロバイダーによって作成された Microsoft 365 ユーザー アカウントのいくつかに Microsoft 365 管理者ロールを割り当てることで、管理委任を管理します。 この演習では、次の 3 つの異なる方法を使用してこれらのロールを割り当てる経験を積みます。1) Microsoft 365 管理センターのユーザー アカウントにロールを直接割り当てる、2) ロール グループを作成し、ロール グループにロールを割り当てた後、Microsoft 365 管理センターのユーザーにロール グループを割り当てる、3) Windows PowerShell を使用してユーザーにロールを割り当てる。 Microsoft 365 管理者ロールを既存のユーザー アカウントのいくつかに割り当てたら、ユーザーがそのロールに従って行動するためのアクセス許可を持っていることを確認して、それらの割り当てをテストします。 


### タスク 1 - Microsoft 365 管理センターで管理者ロールを割り当てる

Holly Dickson には、Microsoft 365 グローバル管理者ロールが割り当てられています。 Holly として引き続き役割を果たす場合、Microsoft 365 管理センターを使用して Adatum ユーザーの 1 人に管理者権限を割り当てます。 このタスクでは、Diego Siciliani のユーザー アカウントに課金管理者ロールを割り当てます。

1. LON-DC1 での以前のラボ演習は完了しました。 このラボ演習で Microsoft 365 管理タスクを実行するには、**LON-CL1** に切り替える必要があります。 ベスト プラクティスとして、一般的な Microsoft 365 管理タスクは、会社のドメイン コントローラーではなく、クライアント PC で実行する必要があります。  <br/>

    **LON-CL1** に切り替えます。 

2. **LON-CL1** では、以前のラボ演習で使用した Holly Dickson として、Edge ブラウザーの **Microsoft 365 管理センター** に引き続きログインしているはずです。 ナビゲーション ウィンドウで **[ユーザー]** を選択し、**[アクティブ ユーザー]** を選択します。 

3. **[アクティブ ユーザー]** の一覧で、**[Diego Siciliani]** を選びます。  <br/>

    **注:**  Diego の名前を選択します。名前の左側にあるチェック ボックスはオンにしないでください。 このチェック ボックスは通常、ユーザーの一覧の上に表示されるメニュー バーで、**[製品ライセンスの管理]** や **[ロールの管理]** などのユーザー関連アクションの 1 つを実行する場合に、複数のユーザーを選択するために使用されます。 ユーザー名を選択すると、そのユーザー専用のプロパティ ペインが開きます。

4. 表示された **[Diego Siciliani]** ペインには、既定で **[アカウント]** タブが表示されます。 このタブで、**[ロール]** セクションまで下にスクロールし、**[ロールの管理]** を選択します。 

5. **[管理者ロールの管理]** ウィンドウでは、現在、既定で **[ユーザー (管理センターに対するアクセス許可なし)]** オプションが選択されています。 Diego に管理者ロールを割り当てたいので、**[管理センターに対するアクセス許可]** オプションを選択します。 これにより、一般的に使用される管理者ロールの一覧を選択できるようになります。 

6. Diego は課金管理者に昇格しましたが、このロールは一般的に使用されるロールの一覧には表示されないため、下にスクロールして **[すべてをカテゴリ別に表示]** を選択します。 

7. カテゴリ別に並べ替えられたロールの一覧で、**[その他]** カテゴリまで下にスクロールし、**[課金管理者]** チェック ボックスをオンにして、**[変更内容を保存]** を選択します。 <br/>

    **ヒント:** 管理者ロールの変更が保存されると、ペインの上部にメッセージが表示されます。 このメッセージでは、実際のデプロイで管理ロールを維持する際に留意すべき次のベスト プラクティスが示されます。**ユーザーには、最小限の役割を割り当てて、必要なアクセス許可のみを付与してください。**

8. **[管理者ロールの管理]** ウィンドウで、画面の右上隅にある **[X]** を選択してウィンドウ閉じます。 これにより、**[アクティブ ユーザー]** 一覧に戻ります。 

9. LON-CL1 と Microsoft 365 管理センターに Holly Dickson としてログインしたままにしてください。

### タスク 2 - Microsoft 365 管理センターでロール グループを使用して管理者ロールを割り当てる

前のタスクでは、Microsoft 365 管理センターで Diego Siciliani のユーザー アカウントに管理者ロールを直接割り当てました。 このタスクでは、代わりにロール グループを使用してロールを割り当てます。 セキュリティ ロール グループを作成し、それにユーザー管理ロールを割り当ててから、そのロール グループを Microsoft 365 管理センターで Lynne Robbin のユーザー アカウントに割り当てます。

1. LON-CL1 では、Holly Dickson として、Microsoft 365 管理センターに引き続きログインしているはずです。 そうでない場合は、すぐに行います。

2. **[Microsoft 365 管理センター]** のナビゲーション ウィンドウで **[チームとグループ]** を選択し、**[アクティブなチームとグループ]** を選択します。 

3. **[アクティブなチームとグループ]** ページには、既定で **[チームと Microsoft 365 グループ]** タブが表示されます。 **[セキュリティ グループ]** タブを選択します。

4. **[セキュリティ グループ]** タブで、メニュー バーの **[セキュリティ グループの追加]** を選択します。 これにより、**[セキュリティ グループの追加]** ウィザードが開始されます。

5. **[セキュリティ グループの追加]** ウィザードの **[基本設定]** ページで、**[名前]** フィールドに「**ユーザー管理ロール グループ**」と入力します。 **[説明]** フィールドに「**このロール グループにはユーザー管理ロールが含まれています**」と入力します。 [**次へ**] を選択します。

6. **[設定の編集]** ページで、**[グループに Azure AD ロールを割り当てることができる]** チェック ボックスをオンにし、**[次へ]** を選択します。

7. **[確認とグループの追加の完了]** ページで、設定を確認します。 設定の変更が必要な場合は、適切な **[編集]** オプションを選択して変更します。 すべての設定が正しければ、**[グループの作成]** を選択します。

8. **ユーザー管理ロール グループ**が作成されたら、**[閉じる]** を選択します。

9. ロール グループを作成したら、それに対応するロールを割り当てる必要があります。 **[アクティブなチームとグループ]** ページに、**[セキュリティ グループ]** タブが表示されます。 **[ユーザー管理ロール グループ]** を選択して、その詳細ウィンドウを開きます。

10. **[ユーザー管理ロール グループ]** ペインには、既定で **[全般]** タブが表示されます。 **[ロール]** セクションで、**[ロールの管理]** を選択します。

11. 表示された **[管理者ロールの管理]** ペインで、**[管理センターに対するアクセス許可]** オプションを選択します。 このオプションのすぐ下に表示される一般的な管理者ロールの一覧で、**[ユーザー管理者]** および **[ユーザー エクスペリエンス サクセス マネージャー]** チェック ボックスをオンにします。 次に、**[すべてをカテゴリ別に表示]** オプションを選択します。 **[ID]** カテゴリまで下にスクロールします。 **[ユーザー管理者]** ロールは、一般的に使用されるロールの一覧で以前に選択したため、既に選択されていることに注意してください。 この **[ID]** カテゴリで、**[ヘルプデスク管理者]** ロールを選択し、**[変更内容を保存]** を選択します。 

12. **[管理者ロールの管理]** ウィンドウで、選択した 3 つのロールが **[管理センターに対するアクセス許可]** オプションの下に表示されます。 ウィンドウの右上隅にある **X** を選択してウィンドウを閉じます。

13. **[セキュリティ グループ]** タブで、**[ユーザー管理ロール グループ]** を選択します。 表示された **[ユーザー管理ロール グループ]** ペインで、**[ロール]** セクションに 3 つのロールが表示されていることを確認します。 このウィンドウを閉じます。

14. ロール グループにロールを割り当てたので、ロール グループを Lynne Robbin のユーザー アカウントに割り当てる必要があります。 **[Microsoft 365 管理センター]** で **[アクティブ ユーザー]** を選択します。

15. **[アクティブ ユーザー]** ページで、**[Lynne Robbins]** を選択します。 

16. 表示された **[Lynne Robbins]** ペインには、既定で **[アカウント]** タブが表示されます。 前のタスクでは、Diego Siciliani のアカウントに課金管理者ロールを割り当てたときに、**[ロール]** セクションで **[ロールの管理]** オプションを選択しました。 ただし、ロール グループを通じて Lynne のロールを割り当てようとしているため、先ほど作成したセキュリティ ロール グループのメンバーとして Lynne を割り当てる必要があります。 グループの割り当てを通じて、Lynne はロール グループに割り当てられたロールを継承します。 したがって、**[グループ]** セクションで、**[グループの管理]** を選択します。 

17. **[グループの管理]** ウィンドウで、**[メンバーシップの割り当て]** を選択します。

18. **[メンバーシップの割り当て]** ウィンドウで、**[ユーザー管理ロール グループ]** チェック ボックスをオンにし、**[追加 (1)]** を選択します。

19. **[保存されました]** 通知がページの上部に表示されたら、このウィンドウを閉じます。 

20. Lynne がユーザー管理ロール グループに割り当てられたロールを継承していることを確認するには、アクティブ ユーザーの一覧から **[Lynne Robbins]** を選択します。 

21. 表示された **[Lynne Robbins]** ペインには、既定で表示される **[アカウント]** タブに、Lynne に割り当てられた 3 つのユーザー管理ロールが表示されます。 **[ロール]** セクションで、**[ロールの管理]** を選択します。

22. 表示された **[管理者ロールの管理]** ペインで、**[管理センターに対するアクセス許可]** オプションの下にある、選択されている 3 つのロールと、Lynne に割り当てられたグループの名前をメモします。 また、3 つのロールが灰色表示されていることにも注意してください。これは、このウィンドウからロールの選択を解除できないことを示しています。 これらのロールを含むロール グループから Lynne にロールが割り当てられているため、ロール グループのメンバーから Lynne を削除することによってのみ、ロールの割り当てを解除できます。 Lynne にこれらのロールが割り当てられていることを確認しました。 この **[管理者ロールの管理]** ペインを閉じます。

23. LON-CL1 と Microsoft 365 管理センターに Holly Dickson としてログインしたままにしてください。

### タスク 3 - Windows PowerShell を使用して管理者ロールを割り当てる  

このタスクでは、Windows PowerShell を使用してユーザー アカウントにロールを割り当てます。 管理者によっては、PowerShell を使用してこのようなメンテナンスを実行することを好む場合があるため、これを実行することで、PowerShell でこの管理機能を実行する経験が得られます。  

このタスクでは、Holly は Patti Fernandez をサービス サポート管理者ロールに割り当てる必要があります。 Microsoft Graph PowerShell モジュールを使用してユーザーを管理者ロールに追加するには、まずユーザーのオブジェクト ID とロールのオブジェクト ID を取得する必要があります。 ロールがまだ有効になっていない (つまり、ユーザーに割り当てられていないか、物理的に有効になっていない) 場合は、PowerShell を使用してロールをユーザーに割り当てる前に、まずロールを有効にする必要があります。 このタスクでは、最初にサービス サポート管理者ロールを有効にしてから、それを Patti Fernandez に割り当てます。

PowerShell を使用すると、特定のロールに割り当てられているすべてのユーザーを表示することもできます。これは、Microsoft 365 のデプロイを監査する際に非常に重要になる場合があります。 このタスクでは、PowerShell を使用して、特定のロールに割り当てられているすべてのユーザーを表示する方法についても学習します。 

1. LON-CL1 で、前のラボから開いたままにしているタスク バーの Windows PowerShell アイコンを選択します。 PowerShell ウィンドウを閉じた場合は、以前と同じ手順を使用して、インスタンスを管理者特権で開きます。 

2. PowerShell セッションは、削除されたグループを PowerShell を使用して復旧した前のラボから、引き続き Microsoft Graph PowerShell に接続されているはずです。 ただし、以前に PowerShell を閉じてから再度開いた場合は、前のラボ演習の手順を使用して Microsoft.Graph.Identity.DirectoryManagement サブモジュールをインポートします。 

3. Microsoft Graph PowerShell で Microsoft 365 ユーザー メンテナンス タスクを実行するには、まず Microsoft.Graph.Users サブモジュールをインポートし、読み取り/書き込みアクセス許可を要求する必要があります。 このサブモジュールをインポートするには、コマンド プロンプトで次のコマンドを入力し、Enter キーを押します。   <br/>

        Import-Module Microsoft.Graph.Users

4. 前のラボ演習では、Microsoft Graph に接続し、削除されたグループを復元するコマンドレットを実行するための "Directory.ReadWrite.All" アクセス許可を要求しました。 このタスクでユーザー オブジェクトとロール オブジェクトを更新するには、Holly は各オブジェクトの読み取り/書き込みアクセス許可を要求する必要があります。 これらのアクセス許可を要求するには、コマンド プロンプトで次のコマンドを入力し、Enter キーを押します。  <br/>

        Connect-MgGraph -Scopes 'User.ReadWrite.All', 'RoleManagement.ReadWrite.Directory'

5. 表示された **[アカウントを選択する]** ウィンドウで、Holly Dickson のアカウントを選択します。 

6. 表示された **[要求されているアクセス許可]** ダイアログ ボックスで、**[組織の代理として同意する]** チェック ボックスをオンにし、**[同意する]** を選択します。

7. Holly は **Patti Fernandez** を**サービス サポート管理者**ロールに割り当てる必要があります。 Microsoft Graph PowerShell を使用してこのロールを割り当てるには、まずサービス サポート管理者ロールのオブジェクト ID を取得して、それを Patti に割り当てることができるようにする必要があります。 ただし、Microsoft Graph PowerShell では、"有効" になっているロールのみを割り当てることができます。 有効なロールとは、ロール テンプレートから有効にされたか、PowerShell または Microsoft 365 管理センターを使用してユーザーに既に割り当てられているロールのことです。 <br/>

    **重要:** この手順を実行する前に、PowerShell ウィンドウが全画面表示モードであることを確認してください。 ロール名は、画面の右端の最後の列に表示されます。 全画面表示モードでない場合、各オブジェクト ID に関連付けられているロール名は表示されません。 

    Microsoft 365 の有効なロールをすべて表示するには、コマンド プロンプトで次のコマンドを入力し、Enter キーを押します。 <br/>
    
        Get-MgDirectoryRole    <br/>

    **注:**  このコマンドは、すでに有効になっている Microsoft 365 のロールを表示します。 この一覧にサービス サポート管理者ロールが表示された場合は、手順 13 に直接進んで、そのロールを Patti に割り当てることができます。 ただし、この有効なロールの一覧にはサービス サポート管理者が含まれていないため、手順 13 で Patti をロールに割り当てる前に、手順 8 から 12 を実行して対応するロール テンプレートからロールを有効にする必要があります。 

8. Microsoft Graph PowerShell でロールを有効にするには、まずそのテンプレートを見つけてテンプレートのオブジェクト ID を取得する必要があります。 テンプレートからロールを有効にするには、テンプレートのオブジェクト ID を知る必要があります。 ロール テンプレートを表示するには、ロール テンプレートの一覧全体を表示する方法と、特定のロールのテンプレートを表示する方法の 2 つがあります。 学習体験として両方の方法を実行して、違いを確認しましょう。 <br/>

    まず、ロール テンプレートの完全な一覧と、そのオブジェクト ID および表示名を表示します。 これを行うには、次のコマンドを入力して Enter キーを押します。 <br/>

        Get-MgDirectoryRoleTemplate | Format-List Id, DisplayName   <br/>

    このコマンドを実行するとわかるように、ロール テンプレートのリストをスクロールして、サービス サポート管理者ロールを探す必要があります。 これがいかに面倒な作業であるかは、すぐにおわかりいただけるはずです。 代わりに、次のコマンドを実行して、特定のロール テンプレート (この場合は "サービス サポート管理者" ロール テンプレート) を照会します。 <br/>

        Get-MgDirectoryRoleTemplate | ? DisplayName -eq "Service Support Administrator"   <br/>

    このコマンドを実行すると、要求されたロール テンプレートのみが表示されることがわかります。 もちろん、ロール テンプレートの一覧全体を表示する必要がある場合もあります。 ただし、単一のロール テンプレートを検索する必要がある場合は、2 番目の PowerShell コマンドを実行する方が、テンプレートの一覧全体をスクロールするよりもはるかに効率的です。
    
9. 前の手順でサービス サポート管理者ロール テンプレートを照会したので、その **ID** (例: fe930be7-5e62-47db-91af-98c3a49a38b1) を強調表示し、**Ctrl + C** を押してクリップボードにコピーします (コピーすると強調表示が消えます)。

10. 次に、サービス サポート管理者テンプレートの属性を取得する変数を作成します。 次のコマンドを入力したら、**Ctrl + V** を押して、前の手順でクリップボードにコピーしたサービス サポート管理者テンプレート ID を貼り付けます。 <br/>

    コマンド プロンプトで次のコマンドを入力し、Enter キーを押します。 <br/>

        $ServiceSupportRoleTemplate = @{ RoleTemplateID = "paste in template ID here" }  <br/>

    例: $ServiceSupportRoleTemplate = @{ RoleTemplateID = "fe930be7-5e62-47db-91af-98c3a49a38b1" }

11. これで、$ServiceSupportRoleTemplate 変数で取得したテンプレートの属性に基づいて、サービス サポート管理者ロールを有効にする準備が整いました。 次のコマンドを入力し、Enter キーを押します。  <br/>

        New-MgDirectoryRole -BodyParameter $ServiceSupportRoleTemplate

12. サービス サポート管理者ロールが有効になっていることを確認するには、次のコマンドを入力して Enter キーを押します。 このコマンドは、有効なロールの一覧を表示します。  <br/>
            
        Get-MgDirectoryRole <br/>

    **注:**  このコマンドは、テンプレートから有効にしたサービス サポート管理者ロールを含め、有効なすべてのロールのオブジェクト ID を表示します。 後で、このロールに Patti を割り当てるときに、手順 15 でサービス サポート管理者ロールのオブジェクト ID をコピーして貼り付けます。

13. 新しく有効にしたサービス サポート管理者ロールに Patti Fernandez を割り当てるには、まず Patti のユーザー アカウントのオブジェクト ID を取得する必要があります。 これを行うには、次のコマンドを入力して Enter キーを押します。 <br/>

        Get-MgUser | Format-List ID, DisplayName

14. これで、直近で有効にしたサービス サポート管理者ロールのオブジェクト ID と Patti のユーザー アカウントのオブジェクト ID がわかったので、そのロールを Patti に割り当てることができます。 次の手順を実行して、このプロセスを完了させます。 <br/>

    a. 前のコマンドでは、アクティブ ユーザーの一覧を表示しました。 Patti のアカウントの **ID** を強調表示し、それをクリップボードにコピーします (**Ctrl + C**)。 クリップボードにコピーすると、強調表示は消えます。  <br/>

    b. 次のコマンドを実行して、Patti のユーザー アカウントのディレクトリ オブジェクトを含む変数を作成します。 このコマンドを入力するときに、Patti のユーザー アカウント用にコピーした ID を貼り付けます (**Ctrl + V**)。 <br/>

        $UserObject = @{ "@odata.id" = "https://graph.microsoft.com/v1.0/directoryObjects/paste in Patti's user account ID here" }  <br/>

    例: $UserObject = @{ "@odata.id" = "https://graph.microsoft.com/v1.0/directoryObjects/22fddbf7-42d2-4698-be65-ebc972a023e3" }

    c. 手順 12 で、有効なロールの一覧を表示しました。 サービス サポート管理者ロールの ID を強調表示し、それをクリップボードにコピーします (**Ctrl + C**)。 <br/>

    d. 次のコマンドを実行して、Patti のユーザー アカウント ($UserObject) を含む変数をディレクトリ ロールに割り当てます。 このコマンドを入力するときに、サービス サポート管理者ロール用にコピーした ID を貼り付けます (**Ctrl + V**)。 <br/> 

        New-MgDirectoryRoleMemberByRef -DirectoryRoleId 'paste in the ID of the role here' -BodyParameter $UserObject
                
15. 次に、Patti がサービス サポート管理者ロールに割り当てられていることを確認します。 以前にこのロールのオブジェクト ID をクリップボードにコピーし、前のコマンドで貼り付けました。 このコマンドにも貼り付ける必要があります。 次のコマンドを入力し、Enter キー を押します:
    
        Get-MgDirectoryRoleMember -DirectoryRoleId 'paste in the ID of the role here' 
                
16. 前のコマンドは、選択したロールに割り当てられているユーザーの ID のみを表示します。 ただし、表示される ID を Patti の ID と照合して、アカウントに**サービス サポート管理者**ロールが割り当てられていることを確認できます。 ご覧のとおり、このロールに割り当てられているユーザーは Patti だけです。 

17. このプロセスを繰り返して、グローバル管理者ロールに割り当てられているすべてのユーザーを表示してみましょう。 手順 15. を繰り返して、**グローバル管理者**ロールに割り当てられている Adatum ユーザーの数を確認します。 このコマンドを完了するには、まずグローバル管理者ロールの ID をクリップボードにコピー (**Ctrl + C**) する必要があります。 この ID は、手順 12 を実行したときに、有効なロールの一覧で確認できます。 <br/>

    **警告:** グローバル管理者ロール テンプレートの ID ではなく、グローバル管理者ロールの ID をコピーしてください。

18. グローバル管理者ロールが割り当てられている複数の Adatum ユーザーが存在することを確認してください。 実際のシナリオでは、Microsoft 365 管理者はこの PowerShell コマンドを使用して、Microsoft 365 デプロイ内に存在するグローバル管理者の数を監視します。 その後、グローバル管理者ロールを真に持つ必要のないすべてのユーザーからそのロールを削除します (ベスト プラクティス ガイドラインは、組織の規模に応じて、Microsoft 365 デプロイ内に 2 から 4 人のグローバル管理者を配置することであることに注意してください)。  <br/>

    このラボの場合、ラボ ホスティング プロバイダーは MOD 管理者以外のユーザーにグローバル管理者ロールを割り当てた (そして、あなたは Holly Dickson に割り当てた) ので、これらのユーザーはそのままにしておきます。 この架空の Adatum デプロイでは、アカウントからこのロールを削除して時間を無駄にする必要はありません。 さらに、今後のラボ タスクの一部は、これらのユーザーにグローバル管理者ロールが割り当てられることに基づいています。 <br/>

    **重要:** 実際のデプロイでは、Microsoft 365 管理者はグローバル管理者ロールを定期的に監視して、割り当てられたユーザーの数を 2 から 4 の間に維持する必要があることに注意してください。
    
19. 今後のラボ演習のために Windows PowerShell セッションは開いたままにしておきますが、次のタスクに進む前に最小化してください。


### タスク 4 - ロールの割り当てを検証する 

このタスクでは、まず 2 人のユーザー、Joni Sherman と Lynne Robbins の管理プロパティを調査します。 次に、クライアント 2 VM (LON-CL2) の Microsoft 365 ホーム ページに各ユーザーとしてログインし、前のタスクで管理委任を管理するときに加えたいくつかの変更を確認します。 最後に、Lynne Robbins として、パスワードのリセットとユーザー アカウントのブロックという 2 つの重要なユーザー アカウント メンテナンス タスクを実行します。

1. LON-CL1 では、Holly Dickson として、Microsoft 365 管理センターに引き続きログインしているはずです。 そうでない場合は、すぐに行います。

2. **Microsoft 365 管理センター**で、**アクティブ ユーザー**が表示されていない場合は、そのページに移動します。  

3. **[アクティブ ユーザー]** の一覧で、**[Joni Sherman]** を選びます。 

4. **Joni Sherman** のプロパティ ウィンドウには、既定で **[アカウント]** タブが表示されます。 **[ロール]** セクションで、Joni に**管理者アクセス権がない**ことが示されているはずです。 右上隅の **[X]** を選択して、Joni のプロパティ ウィンドウを閉じます。

5. **[アクティブ ユーザー]** 一覧で、**[Lynne Robbins]** を選択します。 

6. **Lynne Robbins** のプロパティ ウィンドウでは、Lynne に**ユーザー管理者**ロールが割り当てられていることが表示されます。 Lynne のプロパティ ウィンドウを閉じます。

7. クライアント 2 VM (**LON-CL2**) に切り替えます。

8. **LON-CL2** のログイン画面で、パスワード **Pa55w.rd** を使用してローカル**管理者**アカウントとしてログインします。

9. **[ネットワーク]** ウィンドウが表示されたら、**[はい]** を選択します。

10. タスク バーで、**Microsoft Edge** アイコンを選択します。 必要に応じて、Edge ブラウザー ウィンドウを最大化します。

11. お使いの **Edge** ブラウザーで、**https://portal.office.com** に移動します。 

12. まず、**Joni Sherman** として Microsoft 365 にサインインします。 **[サインイン]** ウィンドウ内で、「**JoniS@xxxxxZZZZZZ.onmicrosoft.com**」と入力します (xxxxxZZZZZZ は、ラボ ホスティング プロバイダーから提供されたテナント プレフィックスです)。 あなたは Joni Sherman としてサインインしているため、ラボ ホスティング プロバイダーによって **[パスワードの入力]** ウィンドウ内で提供されたこの**ユーザー パスワード**を入力します。 <br>

    表示される **[パスワードの更新]** ダイアログ ボックスに、ラボ ホスティング プロバイダーによって **[現在のパスワード]** フィールド内で提供された**ユーザー パスワード**を入力します。 次に、**[新しいパスワード]** フィールドと **[パスワードの確認]** フィールドに新しいユーザー パスワードを入力し、**[サインイン]** を選択します。

13. **[サインインの状態を維持しますか?]** ウィンドウで **[今後、このメッセージを表示しない]** チェックボックスを選択し、**[はい]** を選択します。 **[パスワードの保存]** ウィンドウが表示された場合は、**[しない]** を選択します。

14. ページの中央に **[Microsoft 365 へようこそ]** ダイアログ ボックスが表示された場合は、右向きの矢印 (>) を 2 回選択してからチェック マークをオンにしてダイアログ ボックスを閉じます。

15. **[その他のアプリの検索]** ウィンドウ、**[Microsoft 365 を使用した作成]** ウィンドウ、またはその他の入門用ウィンドウが表示される場合は、ウィンドウの上隅にある **[X]** を選択してそれを閉じます。

16. Joni の Microsoft 365 ホーム ページである **[Microsoft 365 へようこそ]** ウィンドウ上では、ユーザーがアクセス許可を持つアプリケーションを示すナビゲーション ウィンドウが画面の端に表示されます。 この **[アプリ]** ウィンドウでは、**[管理者]** オプションが表示されないことに注意してください。 これは、Joni に Microsoft 365 管理者ロールが割り当てられていないためです。 

17. ここで、Joni として Microsoft 365 からサインアウトします。 **Microsoft Edge** の **[Microsoft 365 へようこそ]** ページの右上で、**Joni Sherman** のユーザー アイコン (上隅にある Joni の写真が入った円) を選択し、表示される **[Joni Sherman]** ウィンドウで **[サインアウト]** を選択します。 

18. ここで、**Lynne Robbins** として Microsoft 365 に再度サインインします。 現在の **Edge** ブラウザー タブに、"**Joni がサインアウトしました**" というメッセージが表示されます。 このウィンドウでは、Joni として再度サインインするか、別のユーザーとしてサインインするかを選択できます。 <br/>

    **[別のアカウントに切り替える]** を選択し、表示された **[メール アドレス]** フィールドに 「**LynneR@xxxxxZZZZZZ.onmicrosoft.com**」と入力し (xxxxxZZZZZZ は、ラボ ホスティング プロバイダーによって提供されるテナント プレフィックスです)、**[サインイン]** を選択します。 **[パスワードの入力]** ウィンドウに、ラボ ホスティング プロバイダーにより提供された**ユーザー パスワード**を入力し、**[サインイン]** を選択します。 <br>

    表示される **[パスワードの更新]** ダイアログ ボックスに、ラボ ホスティング プロバイダーによって **[現在のパスワード]** フィールド内で提供された**ユーザー パスワード**を入力します。 次に、**[新しいパスワード]** フィールドと **[パスワードの確認]** フィールドに新しいユーザー パスワードを入力し、**[サインイン]** を選択します。 

19. **[Microsoft 365 へようこそ]** ダイアログ ボックスが表示された場合は、右向き矢印 (>) を 2 回選択してからチェック マークをオンにしてウィンドウを閉じます。

20. **[その他のアプリの検索]** ウィンドウ、**[Microsoft 365 を使用した作成]** ウィンドウ、またはその他の入門用ウィンドウが表示される場合は、ウィンドウの上隅にある **[X]** を選択してそれを閉じます。

21. Lynne の Microsoft 365 ホーム ページである **[Microsoft 365 へようこそ]** ウィンドウで、画面の端にあるナビゲーション ウィンドウに **[管理者]** アイコンが表示されていることに注意してください。 このアイコンが表示されるのは、Lynne が Microsoft 365 管理者ロールに割り当てられたためです。 **[管理者]** アイコンを選択して、Microsoft 365 管理センターを開きます。

22. **Microsoft 365 管理センター**のナビゲーション ウィンドウで **[ユーザー]** を選択してから **[アクティブ ユーザー]** を選択します。 

23. Lynne は**ユーザー管理者**として、ユーザーのパスワードを変更するアクセス許可を持っています。 Lynne に最近、**Diego Siciliani** と **Pradeep Gupta** から連絡があり、それぞれパスワードが侵害された可能性があるとの報告を受けました。 Adatum の企業ポリシーに従って、Lynne はパスワードを一時的な値にリセットし、次回のログイン時にパスワードのリセットを強制する必要があります。   <br/>

    **[アクティブ ユーザー]** 一覧で、マウスをあるユーザー アカウントから別のユーザー アカウントに移動すると、各ユーザー名の右側に**キー (パスワードのリセット)** アイコンが表示されます。 **Diego Siciliani** の名前の右側に表示されるキー アイコンを選択します。

24. Diego の **[パスワードのリセット]** ウィンドウで、**[パスワードを自動的に作成する]** チェック ボックスにチェック マークが表示されている場合は、このボックスを選択してオフにします。 これにより、Lynne は Diego に一時パスワードを手動で割り当てることができるようになります。  

25. **[パスワード]** フィールドに「**diego**」と入力します。 パスワードの右側に、これが**脆弱な**パスワードであることを示すメッセージが表示されます。 また、フィールドの下に強力なパスワードの要件を示すメッセージも表示されます。 最後に、ペインの下部にある **[パスワードのリセット]** ボタンが有効になっていないことに注意してください。 **このボタンは、強力なパスワードを入力した場合にのみ有効になります**。  

26. **[初めてサインインするときに、このユーザーに対してパスワードを変更することを要求します]** チェック ボックスがオンになっていることを確認します (そうでない場合は、オンにしてチェックマークを表示します)。 **[パスワード]** フィールドに「**Pa55w.rd**」と入力します。 **[パスワード]** フィールドは、これが強力なパスワードであることを示しています。 <br/>

    ただし、ここでは **[初めてサインインするときに、このユーザーに対してパスワードを変更することを要求します]** チェックボックスを選択してオフにします。 パスワード (Pa55w.rd) に推測しやすい単語、語句、または一連の数字が含まれていることを示すエラー メッセージが表示されることに注意してください。 この場合、**password** という単語のバリエーションを入力したため、このエラーが発生します。 最初のサインイン時にユーザーにパスワードの変更を強制する場合、システムはこのパスワードの入力を許可します。 ただし、最初のサインイン時にユーザーに別のパスワードの入力を強制しない場合は、このパスワードは許可されません。

27. これら 2 回のパスワード試行の失敗を受けて、Lynne は Microsoft 365 にパスワードを自動生成させることにしました。 **[パスワードを自動的に作成する]** チェック ボックスをオンにして、チェック マークを表示します。 
    
28. Lynne は Diego が次回ログインするときにパスワードを変更するよう強制したいため、自動的に生成されるパスワードは単なる一時的なパスワードになります。 したがって、**[初めてサインインするときに、このユーザーに対してパスワードを変更することを要求します]** チェック ボックスにチェック マークが表示されていることを確認します。ボックスがオフになっている場合は、オンにしてチェック マークが表示されるようにします。

29. **パスワードのリセット**を選択します。

30. パスワードを保存するように求められた場合は、**[しない]** を選択してウィンドウを閉じます。

31. Diego には管理者ロールが割り当てられているため、Diego のパスワードをリセットできないことを示すエラー メッセージが表示されます。 Diego の場合、このラボ演習の前半で課金管理者ロールを割り当てました。 他の管理者のパスワードを変更できるのはグローバル管理者だけであり、Lynne はグローバル管理者ではないため、Holly Dickson にこの変更を依頼する必要があります。 **[パスワードのリセット]** ウィンドウで **[閉じる]** を選択します。 

32. アンケート要求ウィンドウが表示された場合は、**[キャンセル]** を選択します。

33. 次は、Pradeep Gupta のパスワードを変更する必要があります。 **[アクティブなユーザー]** リストで、**Pradeep Gupta** の右側に表示される **[キー (パスワードのリセット)]** アイコンを選択します。 

34. Pradeep に対して表示される **[パスワードのリセット]** ウィンドウで、**[パスワードを自動的に作成する]** チェック ボックスにチェック マークが表示されていることを確認します。表示されていない場合は、このボックスをオンにして、システムが Pradeep のパスワードを自動的に生成するようにします。  <br/>

    Lynne は Pradeep が次回ログインするときにパスワードを変更するよう強制したいため、これは単なる一時的なパスワードになります。 したがって、**[初めてサインインするときに、このユーザーに対してパスワードを変更することを要求します]** チェック ボックスにチェック マークが表示されていることを確認します。ボックスがオフになっている場合は、オンにしてチェック マークが表示されるようにします。
    
35. **[パスワードのリセット]** ボタンを選択します。

36. **[パスワードがリセットされました]** ウィンドウに、Pradeep のパスワードが正常にリセットされたことを示すメッセージが表示されます。 **[閉じる]** を選択します。

37. 管理者は最近、Alex Wilber のユーザー名がセキュリティ侵害された可能性があることを発見しました。 その結果、Lynne は、管理者が問題の範囲を特定できるまで、誰も Alex のユーザー名でサインインできないように、Alex のアカウントをブロックするよう求められました。 **[アクティブ ユーザー]** 一覧で、**Alex Wilber** の名前の左側にあるチェック ボックスをオンにします (Alex の名前自体は選択しないでください)。  <br/>

    **重要:** Alex のアカウントに関連付けられたコマンドではなくグローバル コマンドを実行するため、アクティブ ユーザーの一覧で Alex のアカウントのみを選択する必要があります。 他のユーザー アカウントが選択されている場合は、続行する前にそのユーザー アカウントの選択を解除する必要があります。 アクティブ ユーザーの一覧をスクロールし、他のユーザー アカウントが選択されていないことを確認してください。 Alex 以外のアカウントが選択されている場合は、アカウントのチェック ボックスを選択してオフにします。 **Alex Wilber のアカウントのみを選択する必要があります。**

38. ページ上部のメニュー バーで**省略記号アイコン (...)** を選択すると、追加アクションのドロップダウン メニューが表示されます。 表示されたメニューから、**[サインイン状態の編集]** を選択します。

39. 表示された **[サインインをブロック]** ペインで、Alex のメール アドレスが **[サインインをブロック]** 見出しの下に表示されていることを確認します。 **[このユーザーのサインインをブロックする]** チェック ボックスをオンにし、**[変更内容を保存]** を選択します。 

40. **[サインインをブロック]** ウィンドウには、Alex のサインインがブロックされていることを示すメッセージが表示されます (Alex のユーザー名が実際にセキュリティ侵害された場合、Alex のユーザー名ではサインインできません)。 さらに、Alex は 60 分以内に Microsoft サービスから自動的にサインアウトされます。 ウィンドウの上隅にある **[X]** を選択して閉じます。 

41. Lynne は、**Nestor Wilke** のユーザー名もセキュリティ侵害された可能性があることを通知されました。 手順 37 から 40 を繰り返して、Nestor のサインインをブロックします (また、他のユーザーが彼のユーザー名を使用してサインインするのをブロックします)。 <br/>

    Nestor のサインインをブロックしようとすると、"**変更を保存できませんでした**" というエラー メッセージが表示されます。 このエラーが発生した理由は、Nestor がグローバル管理者であり、Lynne がグローバル管理者ではないためです。 グローバル管理者のみが、別のグローバル管理者がサインインできないようにブロックできます。 Lynne は、Holly Dickson にこの変更を行うよう依頼する必要があります。 <br/>

    **[サインインをブロック]** ペインを閉じます。

42. 以前に、Alex Wilber がサインインできないようにブロックしました。 ブロックされているかどうかを検証するために、Alex としてサインインを試みます。 **Lynne Robbins** のユーザー アイコン (上隅にある Lynne の写真が入った円) を選択して Microsoft 365 からログアウトし、表示された **[Lynne Robbins]** ウィンドウで **[サインアウト]** を選択します。 

43. ベスト プラクティスとして、サインアウトしたら **[サインアウト]** タブを除くすべてのブラウザー タブを閉じます。**[サインアウト]** タブで、**https://portal.office.com** に移動します。 

44. **[アカウントを選択する]** ウィンドウで、**[別のアカウントを使用する]** を選択します。 **[サインイン]** ウィンドウ内で、「**AlexW@xxxxxZZZZZZ.onmicrosoft.com**」と入力します (xxxxxZZZZZZ は、ラボ ホスティング プロバイダーから提供されたテナントのプレフィックス)。 **[パスワードの入力]** ウィンドウで、ラボ ホスティング プロバイダーによって提供された**ユーザー パスワード**を入力します。  <br/>

    **[アカウントを選択する]** ウィンドウが表示され、"**アカウントがロックされました。サポート担当者に連絡してロックを解除してもらい、もう一度お試しください。**" というエラー メッセージが表示されます。 Alex (または Alex のユーザー名とパスワードを取得した人) がログインできないことを確認しました。 <br/>

    **注:**  アカウントのブロックが完全に実装されるまでに数分かかる場合があります。 ブロックがシステムに実装されるまで、Alex はログオンできる可能性がありますが、Microsoft 365 サービスは利用できず、Microsoft 365 ポータルには表示されません。 アカウントのブロックが解除されると、再びサービスを利用できるようになります。 <br/>

    Alex としてサインインできる場合は、サインアウトして数分待ちます。 これは、ちょっとした休憩を取るには良い機会かもしれません。 その後、Alex として再度サインインしてみます。 この時点までに、Alex のアカウントのサインインがブロックされたことを示すエラー メッセージが表示されるはずです。 
    
45. **LON-CL1** に戻ります。 

46. **LON-CL1** では、Holly Dickson として Edge ブラウザーで **Microsoft 365** に引き続きログインしているはずです。 このタスクの前半から、**[アクティブ ユーザー]** 一覧が **Microsoft 365 管理センター**に表示されているはずです。 

47. さらなる調査の結果、Adatum の CTO は、Alex Wilber のアカウントは実際にはセキュリティ侵害されていないと判断しました。そのため、CTO は Holly に Alex のユーザー アカウントのブロックを解除するよう依頼しました。 手順 37 から 40 を繰り返して、彼のアカウントのブロックを解除します。 手順 39 の **[サインインのブロック]** ウィンドウの代わりに **[サインインのブロックの解除]** ウィンドウが表示されるようになったことに注意してください。  <br/>

    **[サインインのブロックを解除]** ウィンドウでは、現在 **[このユーザーのサインインをブロックする]** チェック ボックスがオンになっています。 このチェック ボックスを選択してオフにし、**[変更内容を保存]** を選択します。 <br/>
    
    **重要:** Alex が再びサインインできるようになるまでに最大 15 分かかる可能性を示す警告メッセージが表示されます。 トレーニングには時間の制約があるため、Alex が再度ログインできるかどうかの確認は**行いません**。 必要に応じて、休憩や空き時間があり、これをテストしたい場合は、後で Alex としてログインしてみることもできます。現時点では、LON-CL1 をそのままにして、**[サインインのブロックを解除]** ウィンドウを閉じます。
    
48. LON-CL1 では、ブラウザーとすべてのタブを開いたままにして、次の演習に進みます。 


# ラボ 2 の終了

